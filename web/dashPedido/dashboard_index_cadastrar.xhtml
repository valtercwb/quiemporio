<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html>
<html lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"      
      xmlns:h="http://java.sun.com/jsf/html">
   
  <head>
      
       
        <link href="scripts/css/signin.css" rel="stylesheet"></link>
      
    <meta charset="utf-8"></meta>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"></meta>
    <meta name="description" content=""></meta>
    <meta name="author" content=""></meta>
    <link rel="icon" href="../../favicon.ico"></link>

    <title>Pedidos</title>
    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"></link>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" integrity="sha384-3AB7yXWz4OeoZcPbieVW64vVXEwADiYyAEhwilzWsLw+9FgqpyjjStpPnpBO8o8S" crossorigin="anonymous"></link>
    <link href="../scripts/css/bootstrap.min.css" rel="stylesheet"></link>
    <link href="../scripts/css/fontawesome-all.min.css" rel="stylesheet"></link>

    <!-- Custom styles for this template -->
    <link href="../scripts/css/styles.css" rel="stylesheet"></link>
  </head>

  <body>
      
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
      <a class="navbar-brand font-weight-bold" href="#">Quiemporio</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
      
      <div class="collapse navbar-collapse" id="navbarColor">
        <ul class="navbar-nav ml-auto">
            <li class="nav-item">
                <div class="btn ">#{userMB.getSessionUser("user").email}  </div>
           </li>
          <li class="nav-item">
            <a class="nav-link font-weight-bold" href="#">Perfil</a>
          </li>
    
          <li>
            <a href="index.xhtml" class="btn btn-default white"><i class="fas fa-sign-out-alt"></i></a>
          </li>
        </ul>
      </div>
    </nav>     
    <div class="row d-lg-none">
        <div class="container-fluid">
            <ul class="nav">
                <li class="nav-item col-3 active">
                    <a class="nav-link text-center " href="/WebJFSMangedBenas/dashPedido/dashboard_index.xhtml"> <i class="fas fa-clipboard-list fa-2x"></i></a>
                  </li>
                  <li class="nav-item col-3">
                      <a class="nav-link text-center " href="/WebJFSMangedBenas/dashProduto/dashboard_produto.xhtml" ><i class="fas fa-cubes fa-2x"></i><span class="sr-only">(current)></span></a>
                  </li>
                  <li class="nav-item col-3">
                    <a class="nav-link text-center" href="/WebJFSMangedBenas/dashEstatistica/dashboard_estatisicas.xhtml"><i class="fas fa-chart-area fa-2x"></i></a>
                  </li>
                  <li class="nav-item col-3">
                    <a class="nav-link text-center" href="/WebJFSMangedBenas/dashCli/dashboard_clientes.xhtml"><i class="fa fa-user-circle fa-2x"></i></a>
                  </li>
              </ul>
        </div>
    </div>
    <div class="container-fluid">
      <div class="row">
        <nav class="d-none d-lg-block bg-faded sidebar">
          <ul class="nav nav-pills flex-column">
            <li class="nav-item">
              <a class="nav-link text-center active" href="/WebJFSMangedBenas/dashPedido/dashboard_index.xhtml"> <i class="fas fa-clipboard-list fa-2x m-3"></i>Pedidos</a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-center " href="/WebJFSMangedBenas/dashProduto/dashboard_produto.xhtml"> <i class="fas fa-clipboard-list fa-2x m-3"></i>Produtos</a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-center " href="/WebJFSMangedBenas/dashEstatistica/dashboard_estatisicas.xhtml"><i class="fas fa-chart-area fa-2x m-3"></i>Estatísticas</a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-center" href="/WebJFSMangedBenas/dashCli/dashboard_clientes.xhtml"><i class="fa fa-user-circle fa-2x m-3"></i>Clientes</a>
            </li>
          </ul>
        </nav>

        <main class="col-xl-12 offset-xl-1 col-lg-12 offset-lg-1 col-md-12 offset-md-1 col-sm-12 offset-sm-1 mt-3">
        
            
          <div class="container">
                <h:form class="form-signin">
                <h2 class="form-signin-heading">Inserir Pedido</h2>
                <br />
                <div class="btn btn-xs btn-primary">Cliente</div>
                <h:selectOneMenu class="form-control flex-column" style="width: 50%;" value="#{PedidoMB.pedido.cliente_cli_id}" >
                    <f:selectItem itemLabel="Selecione" itemValue="" />  
                    <f:selectItems value="#{PedidoMB.listarCliente()}"
                                   var="cliente" 
                                   itemLabel="#{cliente.nome} --- #{cliente.CNPJ}"
                                   itemValue="#{cliente.cliente_Id}">
 
                    </f:selectItems>  
                </h:selectOneMenu>
               
                <br />
                <h4 class="form-control-plaintext">Lista de Produtos</h4>
                

                  <hr />
                  <br />
                  <div class="btn btn-xs btn-primary">Produto</div>
                  <h:selectOneMenu class="form-control " style="width: 300px;" 
                                   valueChangeListener="#{PedidoMB.buscaProduto}" onchange="submit()"
                                   value="#{PedidoMB.produto.prod_id}"
                                    >
                        <f:selectItem itemLabel="Selecione" itemValue="" />  
                
                      <f:selectItems value="#{ProdutoMB.listar()}"
                                   var="produto"                              
                                   itemLabel="#{produto.prod_id} - #{produto.nome}"
                                   itemValue="#{produto.prod_id}">
 
                    </f:selectItems>
                        
                                   
                  </h:selectOneMenu>  

                  <br />
                  <div class="btn ">Quantidade</div>
                   <h:inputText id="inputQuantidade" class="form"
                             style="width: 100px"
                             required="required"
                             requiredMessage="Campo Obrigatório"
                             label="Quantidade"
                             value="#{PedidoMB.quantidadeEdit}">
                   </h:inputText>
                  <div class="btn ">Disponível</div>
                  <h:outputText id="OutputQuantidade" class="form btn-lg btn-info" value="#{PedidoMB.produto.quantidade}"></h:outputText>
                  
                  <div class="btn "> Total</div> 
                  <h:outputText id="OutputValor" class="form btn-lg btn-outline-success" value="R$ #{PedidoMB.d_Valor_Total}"></h:outputText>
                 
<!--                   <div class="btn">Preço Unitário</div>-->
<!--                   <h:inputText id="inputPreço" class="form"
                             required="required" style="width: 100px; text-align: right"
                             requiredMessage="Campo Obrigatório"
                             label="Preço"
                             value="#{PedidoMB.produto.preco_un}">
                   </h:inputText>-->
                  
                  <h:commandButton class="btn-success btn-lg form font-weight-bold" value="+" action="#{PedidoMB.adicionarListaProduto()}"></h:commandButton>
                  
                  <h:dataTable value="#{PedidoMB.listaProdutosPedidos}" var="linha" class="table margin-top-20">
                    <h:column>
                        <f:facet name="header">ID</f:facet>
                        #{linha.prodId}
                    </h:column>
                    <h:column>
                        <f:facet name="header">Produto</f:facet>
                        #{linha.produtos.nome}
                    </h:column>
                    <h:column>
                        <f:facet name="header">Quantidade</f:facet>
                        #{linha.quantidade_produto}
                    </h:column>
                    <h:column>
                        <f:facet name="header">Preço Unitário (R$)</f:facet>
                        #{linha.preco_produto}
                    </h:column>
                    <h:column>
                        <f:facet name="header"><h:commandButton class="btn-danger" value="Excluir TUDO" action="#{PedidoMB.excluirTudoListaProduto()}"></h:commandButton></f:facet>
                        <h:commandButton class="btn-danger" value="Excluir" action="#{PedidoMB.excluirListaProduto(linha)}"></h:commandButton>
                    </h:column>
                    
                </h:dataTable>
                  
                  <h:form><h:commandButton class="btn btn-success btn-lg" value="Salva pedido" action="#{PedidoMB.salvarPedido()}"></h:commandButton>
                    </h:form>
                  
                  <br />
                   <h:messages id="msgInfo"
                            infoClass="btn btn-bg alert-success"
                            warnClass="btn btn-bg alert-warning"
                            errorClass="btn btn-bg alert-danger"
                            fatalClass="btn btn-bg alert-danger"
                            globalOnly="false"
                            />
            </h:form>
          </div>
            
            
        </main>
      </div>
    </div>

    <script>
    $(document).ready(function(e){
        e.preventDefault();
    });

    </script>
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
    <script sec="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script src="../scripts/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="./../assets/js/ie10-viewport-bug-workaround.js"></script>
  </body>
</html>
